/dts-v1/ /plugin/;

#include <dt-bindings/interrupt-controller/irq.h>

/ {
    compatible = "allwinner,sun8i-h3";

    fragment@0 {
        target-path = "/aliases";
        __overlay__ {
            spi0 = "/soc/spi@01c68000";
            spi1 = "/soc/spi@01c69000";
        };
    };

    fragment@1 {
        target = <&pio>;
        __overlay__ {
            net0_pin_irq: net0_pin_irq {
                pins = "PA2";               /* PA2 Connected to Cactus Pot ETH1-INT */
                function = "irq";
                bias-pull-up;
            };

            net1_pin_irq: net1_pin_irq {
                pins = "PA3";               /* PA3 Connected to Cactus Pot ETH2-INT */
                function = "irq";
                bias-pull-up;
            };
        };
    };

    fragment@2 {
        target = <&spi0>;
        __overlay__ {
            status = "okay";

            w5500@0 {
                reg = <4>;
                compatible = "wiznet,w5500";
                pinctrl-names = "default";
                pinctrl-0 = <&net0_pin_irq>;
                spi-max-frequency = <10000000>;             /* Temporary required because long wires connected! */
                interrupt-parent = <&pio>;
                interrupts = <0 2 IRQ_TYPE_LEVEL_LOW>; /* PA2 Connected to Cactus Pot ETH1-INT */
                mac-address = [ 9e 0b 74 f7 5e 6b ];
                status = "okay";
            };

            w5500@1 {
                reg = <5>;
                compatible = "wiznet,w5500";
                pinctrl-names = "default";
                pinctrl-0 = <&net1_pin_irq>;
                spi-max-frequency = <10000000>;             /* Temporary required because long wires connected! */
                interrupt-parent = <&pio>;
                interrupts = <0 3 IRQ_TYPE_LEVEL_LOW>; /* PA3 Connected to Cactus Pot ETH2-INT */
                mac-address = [ 9e 0b 74 f7 5e 6c ];
                status = "okay";
            };
        };
    };
};